<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agenda - Cadastro de Posts</title>
</head>
<body>
    <h1>Cadastro de Post na Agenda</h1>
    <form id="postForm">
        <label for="title">Título:</label><br>
        <input type="text" id="title" name="title"><br>
        <label for="content">Conteúdo:</label><br>
        <textarea id="content" name="content"></textarea><br>
        <label for="scheduledDate">Data de Agendamento:</label><br>
        <input type="datetime-local" id="scheduledDate" name="scheduledDate"><br>
        <input type="hidden" id="creationDate" name="creationDate"><br>
        <button type="submit">Salvar Post</button>
    </form>

    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
        const form = document.getElementById('postForm');
        const creationDateInput = document.getElementById('creationDate');
        const scheduledDateInput = document.getElementById('scheduledDate');

        form.addEventListener('submit', async (event) => {
            event.preventDefault();
            const formData = new FormData(form);
            const scheduledDate = scheduledDateInput.value; // Capturar a data de agendamento
            const currentDate = new Date().toISOString(); // Capturar a data e hora atuais

            try {
                const response = await axios.post('/data/post.json', {
                    title: formData.get('title'),
                    content: formData.get('content'),
                    scheduledDate, // Passar a data de agendamento capturada
                    creationDate: currentDate(new Date) // Passar a data e hora atuais
                });
                console.log(response.data);
                alert('Post salvo com sucesso!');
                form.reset();
            } catch (error) {
                console.error('Erro ao salvar o post:', error);
                alert('Erro ao salvar o post. Verifique o console para mais detalhes.');
            }
        });

        // Definir a data e hora atuais como valor padrão para o campo de data de criação
        creationDateInput.value = new Date().toISOString().slice(0, 16);
    </script>
</body>
</html>
